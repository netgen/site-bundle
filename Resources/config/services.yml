parameters:
    ngmore.controller.full_view.class: Netgen\Bundle\MoreBundle\Controller\FullViewController
    ngmore.controller.embed_view.class: Netgen\Bundle\MoreBundle\Controller\EmbedViewController
    ngmore.controller.search.class: Netgen\Bundle\MoreBundle\Controller\SearchController
    ngmore.controller.page_layout.class: Netgen\Bundle\MoreBundle\Controller\PageLayoutController
    ngmore.controller.parts.class: Netgen\Bundle\MoreBundle\Controller\PartsController
    ngmore.controller.download.class: Netgen\Bundle\MoreBundle\Controller\DownloadController
    ngmore.controller.sitemap.class: Netgen\Bundle\MoreBundle\Controller\SitemapController
    ngmore.controller.user.class: Netgen\Bundle\MoreBundle\Controller\UserController

    ngmore.helper.path_helper.class: Netgen\Bundle\MoreBundle\Helper\PathHelper
    ngmore.helper.site_info_helper.class: Netgen\Bundle\MoreBundle\Helper\SiteInfoHelper
    ngmore.helper.sort_clause_helper.class: Netgen\Bundle\MoreBundle\Helper\SortClauseHelper
    ngmore.helper.mail_helper.class: Netgen\Bundle\MoreBundle\Helper\MailHelper

    ngmore.entity.nguser_setting.class: Netgen\Bundle\MoreBundle\Entity\NgUserSetting
    ngmore.entity.ezuser_accountkey.class: Netgen\Bundle\MoreBundle\Entity\EzUserAccountKey

    ngmore.slot.create_user.class: Netgen\Bundle\MoreBundle\Core\Slot\CreateUserSlot

    ngmore.routing.site_content_url_alias_router.class: Netgen\Bundle\MoreBundle\Routing\SiteContentUrlAliasRouter
    ngmore.routing.site_location_url_alias_router.class: Netgen\Bundle\MoreBundle\Routing\SiteLocationUrlAliasRouter

    ngmore.context_provider.session.class: Netgen\Bundle\MoreBundle\ContextProvider\SessionContextProvider
    ngmore.context_provider.user.class: Netgen\Bundle\MoreBundle\ContextProvider\UserContextProvider

services:
    ngmore.controller.full_view:
        class: "%ngmore.controller.full_view.class%"
        parent: netgen.ezplatform_site.controller.base
        arguments:
            - "@ngmore.helper.sort_clause_helper"
            - "@router"

    ngmore.controller.embed_view:
        class: "%ngmore.controller.embed_view.class%"
        parent: netgen.ezplatform_site.controller.base
        arguments:
            - "@router"
            - "@?logger"

    ngmore.controller.search:
        class: "%ngmore.controller.search.class%"
        parent: netgen.ezplatform_site.controller.base

    ngmore.controller.page_layout:
        class: "%ngmore.controller.page_layout.class%"
        parent: netgen.ezplatform_site.controller.base
        arguments:
            - "@knp_menu.menu_provider"
            - "@knp_menu.renderer_provider"

    ngmore.controller.parts:
        class: "%ngmore.controller.parts.class%"
        parent: netgen.ezplatform_site.controller.base
        arguments:
            - "@ngmore.helper.sort_clause_helper"

    ngmore.controller.download:
        class: "%ngmore.controller.download.class%"
        parent: netgen.ezplatform_site.controller.base
        arguments:
            - "@ezpublish.fieldtype.ezbinaryfile.io_service"
            - "@ezpublish.fieldtype.ezimage.io_service"
            - "@translator"
            - "@event_dispatcher"

    ngmore.controller.sitemap:
        class: "%ngmore.controller.sitemap.class%"
        parent: netgen.ezplatform_site.controller.base

    ngmore.controller.user:
        class: "%ngmore.controller.user.class%"
        parent: netgen.ezplatform_site.controller.base
        arguments:
            - "@ezpublish.api.service.user"
            - "@event_dispatcher"
            - "@form.factory"
            - "@ngmore.repository.ezuser_accountkey"

    ngmore.helper.path_helper:
        class: "%ngmore.helper.path_helper.class%"
        arguments:
            - "@netgen.ezplatform_site.load_service"
            - "@ezpublish.config.resolver"
            - "@router"

    ngmore.helper.site_info_helper:
        class: "%ngmore.helper.site_info_helper.class%"
        arguments:
            - "@netgen.ezplatform_site.load_service"
            - "@ezpublish.config.resolver"

    ngmore.helper.sort_clause_helper:
        class: "%ngmore.helper.sort_clause_helper.class%"

    ngmore.helper.mail_helper:
        class: "%ngmore.helper.mail_helper.class%"
        arguments:
            - "@mailer"
            - "@templating"
            - "@router"
            - "@translator"
            - "@ezpublish.config.resolver"
            - "@?logger"

    ngmore.repository.nguser_setting:
        class: Doctrine\ORM\EntityRepository
        factory: ["@doctrine.orm.default_entity_manager", getRepository]
        arguments:
            - "%ngmore.entity.nguser_setting.class%"

    ngmore.repository.ezuser_accountkey:
        class: Doctrine\ORM\EntityRepository
        factory: ["@doctrine.orm.default_entity_manager", getRepository]
        arguments:
            - "%ngmore.entity.ezuser_accountkey.class%"

    ngmore.slot.create_user:
        class: "%ngmore.slot.create_user.class%"
        arguments:
            - "@ezpublish.api.service.user"
            - "@ngmore.repository.nguser_setting"
        tags:
            - { name: ezpublish.api.slot, signal: UserService\CreateUserSignal }

    ngmore.routing.site_content_url_alias_router:
        class: "%ngmore.routing.site_content_url_alias_router.class%"
        arguments:
            - "@netgen.ezplatform_site.load_service"
            - "@ezpublish.urlalias_generator"
            - "@?router.request_context"
        tags:
            - {name: router, priority: 200}

    ngmore.routing.site_location_url_alias_router:
        class: "%ngmore.routing.site_location_url_alias_router.class%"
        arguments:
            - "@netgen.ezplatform_site.load_service"
            - "@ezpublish.urlalias_generator"
            - "@?router.request_context"
        tags:
            - {name: router, priority: 200}

#    Custom user context hash providers are disabled by default.
#    Enable them in your project if needed by copying one of the
#    following service definitions.
#
#    ngmore.context_provider.session:
#        class: "%ngmore.context_provider.session.class%"
#        arguments:
#            - "@session"
#    tags:
#        - { name: fos_http_cache.user_context_provider }
#
#    ngmore.context_provider.user:
#        class: "%ngmore.context_provider.user.class%"
#        arguments:
#            - "@ezpublish.api.repository"
#    tags:
#        - { name: fos_http_cache.user_context_provider }

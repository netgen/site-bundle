{% set google_maps_api_key = ezpublish.configResolver.parameter('api_keys.google_maps')|default('') %}

<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp&amp;key={{ google_maps_api_key }}"></script>
<script type="text/javascript">
    function initializeGoogleMaps( options ) {
        var mapCenter = new google.maps.LatLng(
            options.latitude > 90 || options.latitude < -90 ? defaults.latitude : options.latitude,
            options.longitude > 180 || options.longitude < -180 ? defaults.longitude : options.longitude
        );

        var mapOptions = {
            zoom: options.zoom > 21 || options.zoom < 0 ? defaults.zoom : options.zoom,
            center: mapCenter,
            mapTypeId: google.maps.MapTypeId[options.mapType]
        };

        var map = new google.maps.Map(document.getElementById('map-canvas-' + options.containerId), mapOptions);

        var marker = new google.maps.Marker({
            position: mapCenter,
            map: map
        });
    }
</script>
